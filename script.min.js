document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("bgCanvas");if(t&&"function"==typeof t.getContext){const e=t.getContext("2d");let n,o,a=[];const s=()=>{n=t.width=window.innerWidth,o=t.height=window.innerHeight};window.addEventListener("resize",s),s();class i{constructor(){this.x=Math.random()*n,this.y=Math.random()*o,this.vx=.5*(Math.random()-.5),this.vy=.5*(Math.random()-.5),this.size=2*Math.random()}update(){this.x+=this.vx,this.y+=this.vy,(this.x<0||this.x>n)&&(this.vx*=-1),(this.y<0||this.y>o)&&(this.vy*=-1)}draw(){e.fillStyle="rgba(0, 240, 255, 0.5)",e.beginPath(),e.arc(this.x,this.y,this.size,0,2*Math.PI),e.fill()}}for(let t=0;t<60;t++)a.push(new i);const r=()=>{e.clearRect(0,0,n,o),a.forEach(t=>{t.update(),t.draw(),a.forEach(n=>{if(t===n)return;const o=t.x-n.x,a=t.y-n.y,s=Math.sqrt(o*o+a*a);s<150&&(e.strokeStyle=`rgba(112, 0, 255, ${1-s/150})`,e.lineWidth=.5,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.stroke())})}),requestAnimationFrame(r)};r()}const e=document.querySelector(".type-wrap");if(e){const t=["Papierologi","Bdne Dane","Rutyn","Gaszenie Po偶ar贸w"];let n=0,o=0,a="",s="",i=!1;!function r(){n===t.length&&(n=0),a=t[n],s=i?a.slice(0,--o):a.slice(0,++o),e.textContent=s;let c=i?50:100;i||s.length!==a.length?i&&0===s.length&&(i=!1,n++,c=500):(c=2e3,i=!0),setTimeout(r,c)}()}const n=document.getElementById("emplRange"),o=document.getElementById("hoursRange"),a=document.getElementById("emplVal"),s=document.getElementById("hoursVal"),i=document.getElementById("totalSaved");if(n&&o&&a&&s&&i){const t=()=>{const t=parseInt(n.value,10),e=parseFloat(o.value);a.textContent=t,s.textContent=`${e} h`;const r=t*e*60*251;i.textContent=new Intl.NumberFormat("pl-PL",{style:"currency",currency:"PLN",maximumFractionDigits:0}).format(r)};n.addEventListener("input",t),o.addEventListener("input",t),t()}const r=document.getElementById("auditForm");if(r){const t=document.getElementById("form-status"),e=document.getElementById("submitBtn");r.addEventListener("submit",function(n){if(n.preventDefault(),!t||!e)return;const o=new FormData(r),a=Object.fromEntries(o),s=JSON.stringify(a);t.textContent="Wysyanie...",t.className="success",t.style.display="block",e.disabled=!0,e.style.opacity="0.5",fetch("https://api.web3forms.com/submit",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:s}).then(async e=>{const n=await e.json();e.ok?(t.className="success",t.textContent=n.message||"Dzikujemy! Twoje zgoszenie zostao wysane.",r.reset()):(console.error(e),t.className="error",t.textContent=n.message||"Wystpi bd.")}).catch(e=>{console.error(e),t.className="error",t.textContent="Co poszo nie tak. Spr贸buj p贸藕niej."}).finally(()=>{e.disabled=!1,e.style.opacity="1",setTimeout(()=>{t.style.display="none"},6e3)})})}const c=document.querySelector(".section-duel");if(c){const t=document.querySelectorAll(".msg.user"),e=document.getElementById("dumbBotType"),n=document.getElementById("smartBotType"),o=document.getElementById("dumbStatus"),a=document.getElementById("smartStatus");if(t.length>0&&e&&n&&o&&a){const s=[{prompt:"Przeanalizuj faktury z tego folderu i podaj sum VAT.",dumb:"Jako model jzykowy nie mam oczu, ale... Czekaj. Faktura to dokument historyczny wywodzcy si z Mezopotamii. Czy wiesz, 偶e Sumerowie u偶ywali glinianych tabliczek? Niestety nie mog otworzy pliku PDF...",smart:"[ANALIZA ZAKOCZONA]\n> Przetworzono plik贸w: 14\n> Wykryto duplikaty: 2\n--------------------------\nSUMA NETTO: 45,230.00 PLN\nSUMA VAT:   10,402.90 PLN\n--------------------------\n[Pobierz Excel] [Wylij do Ksigowej]",dumbStats:"Przetwarzanie: 61.4s | Dokadno: 2%",smartStats:"Przetwarzanie: 0.4s | Dokadno: 100%"},{prompt:"Klient jest wcieky o op贸藕nienie. Napisz przeprosiny i daj rabat.",dumb:"Siema byczku! Sorki 偶e paczka nie dosza, kurier pewnie zgodnia i zjad. Masz tu emotk na pocieszenie: . Nie gniewaj si, to tylko biznes.",smart:"Szanowny Kliencie,\n\nNajmocniej przepraszamy za op贸藕nienie zam贸wienia #9021. Wynika ono z bdu sortowni.\n\nJako rekompensat przesyamy kod rabatowy -15% na kolejne zakupy: PRZEPRASZAMY15.\n\nZ powa偶aniem,\nZesp贸 Obsugi",dumbStats:"Empatia: 0% | Ryzyko utraty klienta: 100%",smartStats:"Analiza sentymentu: Pozytywna | Czas: 0.3s"}],i=s[Math.floor(Math.random()*s.length)];t.forEach(t=>t.textContent=i.prompt);let r=!1;const d=(t,e,n,o,a)=>{let s=0;const i=()=>{if(s<e.length){"\n"===e.charAt(s)?t.innerHTML+="<br>":t.innerHTML+=e.charAt(s),s++;let a=n+(o?0:150*Math.random());setTimeout(i,a)}else a&&a()};i()},l=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&!r&&(r=!0,o.textContent="Pisze... (bardzo powoli)",d(e,i.dumb,50,!1,()=>{o.textContent=i.dumbStats}),setTimeout(()=>{a.textContent="Analizowanie danych...",d(n,i.smart,5,!0,()=>{a.textContent=i.smartStats})},500),l.unobserve(c))})},{threshold:.7});l.observe(c)}}const d=document.querySelectorAll("section h2, .pain-item, .chat-window, .case-card, .calc-container, .service-card");if(d.length>0&&"IntersectionObserver"in window){const t=new IntersectionObserver((t,e)=>{t.forEach(t=>{t.isIntersecting&&(t.target.classList.add("active"),e.unobserve(t.target))})},{threshold:.15});d.forEach(e=>{e.classList.add("reveal"),t.observe(e)})}});