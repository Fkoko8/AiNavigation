document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("bgCanvas");if(!t)return;const e=t.getContext("2d");let n,a,o=[];function s(){n=t.width=window.innerWidth,a=t.height=window.innerHeight}window.addEventListener("resize",s),s();class i{constructor(){this.x=Math.random()*n,this.y=Math.random()*a,this.vx=.5*(Math.random()-.5),this.vy=.5*(Math.random()-.5),this.size=2*Math.random()}update(){this.x+=this.vx,this.y+=this.vy,(this.x<0||this.x>n)&&(this.vx*=-1),(this.y<0||this.y>a)&&(this.vy*=-1)}draw(){e.fillStyle="rgba(0, 240, 255, 0.5)",e.beginPath(),e.arc(this.x,this.y,this.size,0,2*Math.PI),e.fill()}}for(let g=0;g<60;g++)o.push(new i);!function t(){e.clearRect(0,0,n,a),o.forEach(t=>{t.update(),t.draw(),o.forEach(n=>{const a=t.x-n.x,o=t.y-n.y,s=Math.sqrt(a*a+o*o);s<150&&(e.strokeStyle=`rgba(112, 0, 255, ${1-s/150})`,e.lineWidth=.5,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.stroke())})}),requestAnimationFrame(t)}();const r=document.querySelector(".type-wrap");if(r){const k=["Papierologi","Bdne Dane","Rutyn","Gaszenie Po偶ar贸w"];let b=0,f=0,E="",x="",S=!1;!function t(){b===k.length&&(b=0),E=k[b],x=S?E.slice(0,--f):E.slice(0,++f),r.textContent=x;let e=100;S&&(e=50),S||x.length!==E.length?S&&0===x.length&&(S=!1,b++,e=500):(e=2e3,S=!0),setTimeout(t,e)}()}const c=document.getElementById("emplRange"),m=document.getElementById("hoursRange"),d=document.getElementById("emplVal"),l=document.getElementById("hoursVal"),y=document.getElementById("totalSaved");if(c&&m&&d&&l&&y){function u(){const t=parseInt(c.value),e=parseFloat(m.value);d.textContent=t,l.textContent=e+" h";const n=t*e*60*251;y.textContent=new Intl.NumberFormat("pl-PL",{style:"currency",currency:"PLN",maximumFractionDigits:0}).format(n)}c.addEventListener("input",u),m.addEventListener("input",u),u()}const p=document.getElementById("auditForm");if(p){const A=document.getElementById("form-status"),C=document.getElementById("submitBtn");p.addEventListener("submit",function(t){t.preventDefault();const e=new FormData(p),n=Object.fromEntries(e),a=JSON.stringify(n);A.textContent="Wysyanie...",A.className="success",A.style.display="block",C.disabled=!0,C.style.opacity="0.5",fetch("https://api.web3forms.com/submit",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:a}).then(async t=>{let e=await t.json();200==t.status?(A.className="success",A.textContent="Dzikujemy! Twoje zgoszenie zostao wysane.",p.reset()):(console.log(t),A.className="error",A.textContent="Bd: "+e.message)}).catch(t=>{console.log(t),A.className="error",A.textContent="Co poszo nie tak. Spr贸buj p贸藕niej."}).then(function(){C.disabled=!1,C.style.opacity="1",setTimeout(()=>{A.style.display="none"},5e3)})})}const h=document.querySelector(".section-duel");if(h){const j=[{prompt:"Przeanalizuj faktury z tego folderu i podaj sum VAT.",dumb:"Jako model jzykowy nie mam oczu, ale... Czekaj. Faktura to dokument historyczny wywodzcy si z Mezopotamii. Czy wiesz, 偶e Sumerowie u偶ywali glinianych tabliczek? Niestety nie mog otworzy pliku PDF...",smart:"[ANALIZA ZAKOCZONA]\n> Przetworzono plik贸w: 14\n> Wykryto duplikaty: 2\n--------------------------\nSUMA NETTO: 45,230.00 PLN\nSUMA VAT:   10,402.90 PLN\n--------------------------\n[Pobierz Excel] [Wylij do Ksigowej]",dumbStats:"Przetwarzanie: 61.4s | Dokadno: 2%",smartStats:"Przetwarzanie: 0.4s | Dokadno: 100%"},{prompt:"Klient jest wcieky o op贸藕nienie. Napisz przeprosiny i daj rabat.",dumb:"Siema byczku! Sorki 偶e paczka nie dosza, kurier pewnie zgodnia i zjad. Masz tu emotk na pocieszenie: . Nie gniewaj si, to tylko biznes.",smart:"Szanowny Kliencie,\n\nNajmocniej przepraszamy za op贸藕nienie zam贸wienia #9021. Wynika ono z bdu sortowni.\n\nJako rekompensat przesyamy kod rabatowy -15% na kolejne zakupy: PRZEPRASZAMY15.\n\nZ powa偶aniem,\nZesp贸 Obsugi",dumbStats:"Empatia: 0% | Ryzyko utraty klienta: 100%",smartStats:"Analiza sentymentu: Pozytywna | Czas: 0.3s"},{prompt:"Mamy spadek sprzeda偶y czapek. Co robi w Q3?",dumb:"Czapki s okrge. Ziemia te偶 jest okrga. Mo偶e spr贸bujmy sprzedawa czapki pingwinom na Madagaskarze? Tam jest zimno... a nie, czekaj, tam s lemury.",smart:"[ANALIZA DANYCH Q3]\nTrend: Spadek popytu na nakrycia gowy (-12% r/r).\nREKOMENDACJA:\n1. Pivot na akcesoria sportowe (opaski, bandany) -> Wzrost w bran偶y o 22%.\n2. Kampania wyprzeda偶owa 'Last Minute' dla obecnych stan贸w magazynowych.",dumbStats:"Logika: Brak danych | IQ: Wtpliwe",smartStats:"Analiza rynku: 4TB danych | Trafno: 98%"}],v=j[Math.floor(Math.random()*j.length)];document.querySelectorAll(".msg.user").forEach(t=>t.textContent=v.prompt);const I=v.dumb,M=v.smart,P=document.getElementById("dumbBotType"),T=document.getElementById("smartBotType"),B=document.getElementById("dumbStatus"),N=document.getElementById("smartStatus");let L=!1;function z(t,e,n,a,o){let s=0;!function i(){if(s<e.length){"\n"===e.charAt(s)?t.innerHTML+="<br>":t.innerHTML+=e.charAt(s),s++;let o=n;a||(o+=150*Math.random()),setTimeout(i,o)}else o&&o()}()}new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&!L&&(L=!0,B.textContent="Pisze... (bardzo powoli)",z(P,I,50,!1,()=>{B.textContent=v.dumbStats}),setTimeout(()=>{N.textContent="Analizowanie danych...",z(T,M,5,!0,()=>{N.textContent=v.smartStats})},500))})},{threshold:.7}).observe(h)}const w=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&t.target.classList.add("active")})},{threshold:.15});document.querySelectorAll("section h2, .pain-item, .chat-window, .case-card, .calc-container, .service-card").forEach(t=>{t.classList.add("reveal"),w.observe(t)})});